---
title: Kioskowy runtime watchdog dla publicznych, bezobsÅ‚ugowych urzÄ…dzeÅ„
summary: Projekt minimalnej, odpornej na awarie warstwy nadzorujÄ…cej runtime, odpowiedzialnej za kontrolÄ™ i odzyskiwanie webowej aplikacji kioskowej dziaÅ‚ajÄ…cej na publicznych, bezobsÅ‚ugowych maszynach.

category: System architecture
featured: false
priority: 70
tags: ["kiosk", "watchdog", "systemy publiczne", "niezawodnoÅ›Ä‡", "bezobsÅ‚ugowy runtime", "odzyskiwanie po awarii", "architektura systemÃ³w"]
links:
  - label: Architecture showcase (GitHub)
    href: "https://github.com/rocketdeploy-dev/showcase-kiosk-runtime-watchdog"
    kind: repo
  - label: PowiÄ…zane case study â€“ aplikacja kioskowa
    href: "/pl/case-studies/kiosk-web-application/"
    kind: deep-dive
  - label: Porozmawiajmy
    href: "/pl/contact/"
    kind: cta
---

## Kontekst systemowy

To case study koncentruje siÄ™ na **warstwie nadzoru wykonania (runtime supervision)** stosowanej w kioskowych aplikacjach webowych dziaÅ‚ajÄ…cych na **publicznych, bezobsÅ‚ugowych urzÄ…dzeniach**, takich jak automaty paczkowe czy terminale samoobsÅ‚ugowe.

W przeciwieÅ„stwie do gÅ‚Ã³wnej aplikacji kioskowej â€” ktÃ³ra obsÅ‚uguje interakcjÄ™ z uÅ¼ytkownikiem i przepÅ‚yw biznesowy â€” ten komponent odpowiada za **ochronÄ™ samego Å›rodowiska wykonawczego urzÄ…dzenia**.

DziaÅ‚a jako **najbardziej zewnÄ™trzna warstwa wykonania**, Å‚adowana bezpoÅ›rednio przez przeglÄ…darkÄ™ kiosku i odpowiedzialna za:
- prezentacjÄ™ neutralnego ekranu startowego i fallback,
- osadzenie wÅ‚aÅ›ciwej aplikacji kioskowej,
- nadzÃ³r nad jej gotowoÅ›ciÄ… i Å¼ywotnoÅ›ciÄ…,
- automatyczne odzyskiwanie w przypadku awarii lub zawieszenia aplikacji.

Ta warstwa istnieje, poniewaÅ¼ **publiczne kioski nie mogÄ… polegaÄ‡ na interwencji czÅ‚owieka**.

---

## Kontekst wdroÅ¼eniowy

System kioskowy jest wdraÅ¼any w **dwÃ³ch fizycznie odseparowanych Å›rodowiskach** wewnÄ…trz tej samej obudowy urzÄ…dzenia:

- **urzÄ…dzenie kioskowe** â€“ fizyczny ekran dotykowy z zamkniÄ™tym systemem operacyjnym i przeglÄ…darkÄ… w trybie kioskowym,
- **lokalna jednostka serwerowa** â€“ osobna maszyna odpowiedzialna za hostowanie gÅ‚Ã³wnej aplikacji kioskowej.

**Runtime watchdog opisywany w tym case study dziaÅ‚a bezpoÅ›rednio na urzÄ…dzeniu kioskowym**.  
Jest Å‚adowany lokalnie przez przeglÄ…darkÄ™ kiosku i pozostaje aktywny niezaleÅ¼nie od stanu gÅ‚Ã³wnej aplikacji.

WÅ‚aÅ›ciwa aplikacja kioskowa (SPA):
- dziaÅ‚a na **osobnej maszynie**,
- jest wdroÅ¼ona jako dÅ‚ugotrwale dziaÅ‚ajÄ…ca usÅ‚uga webowa,
- jest dostÄ™pna wyÅ‚Ä…cznie w ramach wewnÄ™trznej sieci LAN urzÄ…dzenia.

Taki podziaÅ‚ zapewnia, Å¼e:
- awarie aplikacji nie kompromitujÄ… runtimeâ€™u urzÄ…dzenia,
- ekran kiosku moÅ¼e zawsze odzyskaÄ‡ dziaÅ‚anie niezaleÅ¼nie,
- nadzÃ³r na poziomie urzÄ…dzenia pozostaje prosty, zaufany i stabilny.

---

## GÅ‚Ã³wny problem

W bezobsÅ‚ugowych Å›rodowiskach kioskowych:
- procesy przeglÄ…darki mogÄ… siÄ™ zawieszaÄ‡,
- zdalne aplikacje mogÄ… ulegaÄ‡ awariom niezaleÅ¼nie od urzÄ…dzenia,
- Å‚Ä…cznoÅ›Ä‡ sieciowa moÅ¼e byÄ‡ niestabilna,
- restart urzÄ…dzenia lub przeglÄ…darki jest kosztowny operacyjnie.

Poleganie wyÅ‚Ä…cznie na aplikacji kioskowej do zarzÄ…dzania wÅ‚asnym stanem zdrowia jest niewystarczajÄ…ce.

Wymagana jest osobna, **prostsza i bardziej zaufana warstwa wykonawcza**, ktÃ³ra:
- nadzoruje aplikacjÄ™,
- wykrywa stany awaryjne,
- przywraca uÅ¼ywalny stan bez rÄ™cznej interwencji.

---

## Decyzja architektoniczna

PodjÄ™to Å›wiadomÄ… decyzjÄ™ o wprowadzeniu **dedykowanej warstwy kiosk shell / watchdog**, oddzielonej od gÅ‚Ã³wnej aplikacji.

Kluczowe cechy tej warstwy:
- implementacja w postaci **pojedynczego statycznego pliku HTML**,
- serwowana lokalnie na urzÄ…dzeniu,
- brak procesu build, frameworkÃ³w i zaleÅ¼noÅ›ci runtime,
- wykorzystanie wyÅ‚Ä…cznie standardowych API przeglÄ…darki.

Osadzona aplikacja kioskowa jest Å‚adowana w iframe i traktowana jako **niezaufana powierzchnia wykonawcza**.

WidocznoÅ›Ä‡ aplikacji jest przyznawana dopiero po potwierdzeniu gotowoÅ›ci i musi byÄ‡ stale podtrzymywana poprzez sygnaÅ‚y heartbeat.

---

## Model wykonania

### Inicjalizacja

1. Kiosk shell natychmiast renderuje neutralny ekran startowy.
2. Docelowa aplikacja kioskowa jest Å‚adowana w iframe.
3. Do momentu otrzymania sygnaÅ‚u gotowoÅ›ci iframe pozostaje ukryty.
4. Przekroczenie ustalonego timeoutu powoduje przeÅ‚adowanie aplikacji.

---

### Normalna praca

- Osadzona aplikacja musi cyklicznie wysyÅ‚aÄ‡ sygnaÅ‚y heartbeat.
- KaÅ¼dy heartbeat odÅ›wieÅ¼a znacznik czasu utrzymywany przez watchdog.
- DopÃ³ki sygnaÅ‚y pojawiajÄ… siÄ™ terminowo, aplikacja pozostaje widoczna.

---

### Awaria i odzyskiwanie

W przypadku braku heartbeatÃ³w lub przekroczenia limitÃ³w czasowych:
- iframe jest ukrywany,
- wyÅ›wietlany jest ekran fallback lub serwisowy,
- aplikacja jest ponownie Å‚adowana po ustalonym czasie.

Odzyskiwanie jest:
- automatyczne,
- deterministyczne,
- niezaleÅ¼ne od interakcji uÅ¼ytkownika.

---

## Dlaczego watchdog w jednym pliku

Zastosowanie watchdoga w postaci pojedynczego pliku HTML byÅ‚o Å›wiadomÄ… decyzjÄ… architektonicznÄ….

### Zalety:
- minimalna powierzchnia ataku,
- bardzo niska zÅ‚oÅ¼onoÅ›Ä‡ operacyjna,
- trywialne wdraÅ¼anie i aktualizacje,
- przewidywalne zachowanie runtime.

### Kompromisy:
- brak modularnoÅ›ci i mechanizmÃ³w rozszerzeÅ„,
- koniecznoÅ›Ä‡ utrzymania bardzo prostej logiki,
- ograniczone moÅ¼liwoÅ›ci personalizacji wizualnej.

W tym kontekÅ›cie **prostota jest cechÄ…, a nie ograniczeniem**.

---

## Relacja z aplikacjÄ… kioskowÄ…

Ten watchdog nie zastÄ™puje aplikacji kioskowej.

Zamiast tego:
- **aplikacja kioskowa** obsÅ‚uguje przepÅ‚ywy uÅ¼ytkownika, integracjÄ™ backendowÄ… i UI,
- **warstwa watchdog** odpowiada za nadzÃ³r wykonania i odzyskiwanie.

Razem tworzÄ… system, w ktÃ³rym:
- awarie sÄ… izolowane,
- odzyskiwanie jest gwarantowane,
- urzÄ…dzenie zawsze wraca do uÅ¼ywalnego stanu.

---

## Aspekty bezpieczeÅ„stwa (wysoki poziom)

Praca w Å›rodowisku publicznym wymagaÅ‚a:
- traktowania osadzonej aplikacji jako niezaufanej,
- unikania trwaÅ‚ych sekretÃ³w i poÅ›wiadczeÅ„,
- ograniczenia stanu lokalnego do znacznikÃ³w czasu w pamiÄ™ci,
- polegania wyÅ‚Ä…cznie na jawnych sygnaÅ‚ach runtime.

Watchdog egzekwuje **bezpieczeÅ„stwo wykonania**, a nie bezpieczeÅ„stwo biznesowe.

---

## Uwaga dotyczÄ…ca dokumentacji wizualnej

Ten komponent dziaÅ‚a wyÅ‚Ä…cznie na **publicznych urzÄ…dzeniach**.

Z tego powodu:
- zrzuty ekranu UI sÄ… celowo pominiÄ™te,
- branding i ukÅ‚ad interfejsu nie sÄ… prezentowane,
- zachowanie systemu opisano poprzez przepÅ‚ywy wykonania zamiast wizualizacji.

Pozwala to zachowaÄ‡ klarownoÅ›Ä‡ architektonicznÄ… bez ujawniania rozpoznawalnych interfejsÃ³w.

---

## Rezultat koÅ„cowy

Efektem jest **niewielka, ale krytyczna warstwa architektoniczna**, ktÃ³ra:
- znaczÄ…co zwiÄ™ksza niezawodnoÅ›Ä‡ kiosku,
- izoluje awarie aplikacji od runtimeâ€™u urzÄ…dzenia,
- umoÅ¼liwia ciÄ…gÅ‚Ä…, bezobsÅ‚ugowÄ… pracÄ™,
- i osiÄ…ga to przy minimalnej zÅ‚oÅ¼onoÅ›ci.

To case study pokazuje, Å¼e **solidne systemy czÄ™sto opierajÄ… siÄ™ na bardzo maÅ‚ych, precyzyjnie zdefiniowanych komponentach** â€” szczegÃ³lnie na granicach wykonania.

---

## PowiÄ…zane komponenty systemu

Ten runtime watchdog nadzoruje **oddzielnÄ… aplikacjÄ™ kioskowÄ…**, odpowiedzialnÄ… za interakcjÄ™ z uÅ¼ytkownikiem i logikÄ™ operacyjnÄ….

Aplikacja dziaÅ‚a jako niezaleÅ¼na usÅ‚uga webowa w wewnÄ™trznej sieci maszyny i jest odseparowana od runtimeâ€™u urzÄ…dzenia.

ğŸ‘‰ Zobacz powiÄ…zane case study:  
**Dotykowa aplikacja webowa dla publicznych kioskÃ³w**

https://rocketdeploy.dev/pl/case-studies/kiosk-web-application/

---

## Architecture showcase (GitHub)

To case study skupia siÄ™ na **kontekÅ›cie, decyzjach i rezultatach**.

Aby zajrzeÄ‡ gÅ‚Ä™biej w:
- nadzÃ³r wykonania,
- sygnalizacjÄ™ stanu poprzez heartbeat,
- oraz deterministycznÄ… logikÄ™ odzyskiwania,

zobacz dedykowane repozytorium **architecture showcase**:

ğŸ‘‰ https://github.com/rocketdeploy-dev/showcase-kiosk-runtime-watchdog