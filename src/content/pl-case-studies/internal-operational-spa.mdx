---
title: Operacyjna aplikacja SPA z kontrolÄ… rÃ³l dla systemÃ³w wewnÄ™trznych
summary: Projekt i implementacja produkcyjnej aplikacji typu single-page, wykorzystywanej jako interfejs operacyjny dla zespoÅ‚Ã³w wewnÄ™trznych, zaprojektowanej z myÅ›lÄ… o wyraÅºnych granicach architektonicznych i dÅ‚ugoterminowej ewolucji.

category: Architektura frontendu
featured: true
priority: 80
tags: ["spa", "angular", "typescript", "rbac", "architektura frontendu", "bff", "operacje", "narzÄ™dzia wewnÄ™trzne"]
links:
  - label: Showcase architektury (GitHub)
    href: "https://github.com/rocketdeploy-dev/showcase-spa-architecture"
    kind: deep-dive
  - label: Porozmawiajmy
    href: "/pl/contact/"
    kind: cta
---

import GalleryLightbox from "../../components/GalleryLightbox.astro";

## Kontekst systemowy

Projekt koncentrowaÅ‚ siÄ™ na zbudowaniu **dedykowanego frontendu operacyjnego** dla zespoÅ‚Ã³w wewnÄ™trznych pracujÄ…cych w ramach wiÄ™kszego, rozproszonego systemu.

Aplikacja peÅ‚ni rolÄ™ **interfejsu typu single-page** do codziennych zadaÅ„ operacyjnych, takich jak:
- zarzÄ…dzanie pracownikami i ich rolami,
- przeglÄ…danie i analiza punktÃ³w usÅ‚ugowych,
- podglÄ…d statusÃ³w operacyjnych i przypisaÅ„,
- interakcjÄ™ z danymi udostÄ™pnianymi przez systemy backendowe za poÅ›rednictwem ***dedykowanej warstwy BFF zaprojektowanej i zaimplementowanej jako czÄ™Å›Ä‡ projektu.**

System od poczÄ…tku projektowany byÅ‚ jako:
- **narzÄ™dzie wewnÄ™trzne**, a nie aplikacja publiczna,
- dÅ‚ugowieczny interfejs operacyjny,
- frontend, ktÃ³ry musi pozostaÄ‡ przewidywalny, bezpieczny i moÅ¼liwy do rozwoju w czasie.

---

## Kluczowe wyzwania

### 1. Frontend jako system operacyjny, a nie tylko UI

Aplikacja nie jest â€cienkÄ… warstwÄ… prezentacjiâ€.

Odpowiada ona za:
- egzekwowanie granic dostÄ™pu zanim dane zostanÄ… wyÅ›wietlone,
- prezentacjÄ™ widokÃ³w i akcji zaleÅ¼nych od rÃ³l,
- obsÅ‚ugÄ™ stanu uwierzytelnienia i cyklu Å¼ycia sesji,
- jasne i spÃ³jne prezentowanie statusu operacyjnego.

WymagaÅ‚o to traktowania frontendu jako **peÅ‚noprawnego komponentu systemu**, a nie wyÅ‚Ä…cznie warstwy renderujÄ…cej.

---

### 2. Wiele rÃ³l, jeden wspÃ³lny interfejs

W ramach jednej aplikacji dziaÅ‚ajÄ… rÃ³Å¼ne grupy uÅ¼ytkownikÃ³w, w tym:
- personel operacyjny,
- menedÅ¼erowie i koordynatorzy,
- uÅ¼ytkownicy techniczni lub administracyjni.

KaÅ¼da rola:
- widzi inne dane,
- ma dostÄ™p do innych akcji,
- funkcjonuje w innym kontekÅ›cie operacyjnym.

Wyzwanie polegaÅ‚o na zaprojektowaniu:
- czytelnego modelu kontroli dostÄ™pu opartego o role,
- przewidywalnych granic nawigacyjnych,
- interfejsu, ktÃ³ry pozostaje zrozumiaÅ‚y mimo rÃ³Å¼nic w odpowiedzialnoÅ›ciach.

---

### 3. Bezpieczna i przewidywalna integracja z backendem

Aplikacja SPA komunikuje siÄ™ z systemami backendowymi poprzez **API typu BFF (Backend-for-Frontend)**.

Kluczowe wymagania obejmowaÅ‚y:
- bezpieczne uwierzytelnianie przez zewnÄ™trznego dostawcÄ™ toÅ¼samoÅ›ci,
- bezpieczne zarzÄ…dzanie tokenami po stronie klienta,
- spÃ³jnÄ… obsÅ‚ugÄ™ bÅ‚Ä™dÃ³w i scenariuszy odzyskiwania,
- brak wycieku danych uwierzytelniajÄ…cych do zewnÄ™trznych domen.

Frontend musiaÅ‚ pozostaÄ‡ **agnostyczny wzglÄ™dem kontraktÃ³w**, jednoczeÅ›nie egzekwujÄ…c silne gwarancje operacyjne.

Warstwa BFF byÅ‚a traktowana jako peÅ‚noprawny element architektury frontendowej,
projektowana i implementowana rÃ³wnolegle z aplikacjÄ… SPA w celu zapewnienia stabilnych kontraktÃ³w
oraz izolacji zÅ‚oÅ¼onoÅ›ci systemÃ³w backendowych.

---

### 4. DÅ‚ugoterminowa ewolucja przy aktywnym uÅ¼yciu

Aplikacja jest aktywnie rozwijana.

Od poczÄ…tku musiaÅ‚a wspieraÄ‡:
- przyrostowe dostarczanie funkcjonalnoÅ›ci,
- zmiany architektoniczne bez przepisywania caÅ‚oÅ›ci,
- czÄ™Å›ciowÄ… funkcjonalnoÅ›Ä‡ bez naruszania istniejÄ…cych przepÅ‚ywÃ³w.

WymagaÅ‚o to:
- silnych granic architektonicznych,
- minimalnego sprzÄ™Å¼enia miÄ™dzy obszarami funkcjonalnymi,
- jawnej obsÅ‚ugi obszarÃ³w typu â€work in progressâ€.

---

## PodejÅ›cie architektoniczne

KluczowÄ… decyzjÄ… byÅ‚o zaprojektowanie SPA jako **warstwowego systemu frontendowego**, a nie monolitycznego UI.

### Struktura wysokiego poziomu:
- **Application shell** â€“ globalni providerzy, routing, layout i obsÅ‚uga bÅ‚Ä™dÃ³w.
- **Routing i guardy** â€“ struktura nawigacji i egzekwowanie dostÄ™pu.
- **Obszary funkcjonalne** â€“ izolowane domeny UI odpowiedzialne za kompozycjÄ™ widokÃ³w.
- **Serwisy przekrojowe** â€“ uwierzytelnianie, motywy, lokalizacja.
- **Pipeline HTTP** â€“ doÅ‚Ä…czanie tokenÃ³w, logika ponowieÅ„ i propagacja bÅ‚Ä™dÃ³w.

Takie podejÅ›cie:
- utrzymuje odpowiedzialnoÅ›ci w sposÃ³b jawny,
- pozwala funkcjom ewoluowaÄ‡ niezaleÅ¼nie,
- czyni system zrozumiaÅ‚ym nawet bez znajomoÅ›ci kodu.

---

## Widoki i przepÅ‚ywy operacyjne

Aktualna wersja aplikacji wspiera juÅ¼ kilka przepÅ‚ywÃ³w operacyjnych.

### ZarzÄ…dzanie personelem
- listy pracownikÃ³w zaleÅ¼ne od rÃ³l,
- szczegÃ³Å‚owe profile pracownikÃ³w,
- widocznoÅ›Ä‡ rÃ³l, obszarÃ³w i preferencji powiadomieÅ„,
- czytelne wskaÅºniki statusu operacyjnego.

### ZarzÄ…dzanie punktami usÅ‚ugowymi
- listy punktÃ³w usÅ‚ugowych ze statusem operacyjnym,
- szczegÃ³Å‚owe widoki Å‚Ä…czÄ…ce adres, usÅ‚ugi i wspÃ³Å‚rzÄ™dne,
- widocznoÅ›Ä‡ statusÃ³w i kontekstu przypisaÅ„.

### Showcase UI

<GalleryLightbox
  cols={2}
  images={[
    {
      src: "/case-studies/internal-operational-spa/1_1.png",
      alt: "Lista pracownikÃ³w (tryb ciemny)",
      caption: "Lista pracownikÃ³w w trybie ciemnym z oznaczeniami rÃ³l/statusÃ³w i szybkimi akcjami."
    },
    {
      src: "/case-studies/internal-operational-spa/1_2.png",
      alt: "SzczegÃ³Å‚y pracownika (tryb ciemny)",
      caption: "Widok profilu pracownika w trybie ciemnym z danymi kontaktowymi, rolami/obszarami i preferencjami powiadomieÅ„."
    },
    {
      src: "/case-studies/internal-operational-spa/1_3.png",
      alt: "Lista pracownikÃ³w (tryb jasny)",
      caption: "Lista pracownikÃ³w w trybie jasnym ze spÃ³jnym ukÅ‚adem, oznaczeniami i szybkimi akcjami."
    },
    {
      src: "/case-studies/internal-operational-spa/1_4.png",
      alt: "SzczegÃ³Å‚y pracownika (tryb jasny)",
      caption: "Widok profilu pracownika w trybie jasnym z przypisaniami rÃ³l/obszarÃ³w i ustawieniami powiadomieÅ„."
    },

    {
      src: "/case-studies/internal-operational-spa/2_1.png",
      alt: "Lista punktÃ³w usÅ‚ugowych (tryb ciemny)",
      caption: "Lista punktÃ³w usÅ‚ugowych w trybie ciemnym ze statusem operacyjnym i tagami moÅ¼liwoÅ›ci/usÅ‚ug."
    },
    {
      src: "/case-studies/internal-operational-spa/2_2.png",
      alt: "SzczegÃ³Å‚y punktu usÅ‚ugowego (tryb ciemny)",
      caption: "Widok szczegÃ³Å‚Ã³w punktu usÅ‚ugowego w trybie ciemnym Å‚Ä…czÄ…cy adres, usÅ‚ugi i wspÃ³Å‚rzÄ™dne."
    },
    {
      src: "/case-studies/internal-operational-spa/2_3.png",
      alt: "Lista punktÃ³w usÅ‚ugowych (tryb jasny)",
      caption: "Lista punktÃ³w usÅ‚ugowych w trybie jasnym z tÄ… samÄ… hierarchiÄ… informacji i ukÅ‚adem tagÃ³w."
    },
    {
      src: "/case-studies/internal-operational-spa/2_4.png",
      alt: "SzczegÃ³Å‚y punktu usÅ‚ugowego (tryb jasny)",
      caption: "Widok szczegÃ³Å‚Ã³w punktu usÅ‚ugowego w trybie jasnym z metadanymi lokalizacji, usÅ‚ugami i wspÃ³Å‚rzÄ™dnymi."
    },

    {
      src: "/case-studies/internal-operational-spa/3_1.png",
      alt: "Ekran ustawieÅ„ (tryb ciemny)",
      caption: "Ekran ustawieÅ„ w trybie ciemnym pokazujÄ…cy preferencje motywu i jÄ™zyka."
    },
    {
      src: "/case-studies/internal-operational-spa/3_2.png",
      alt: "Ekran ustawieÅ„ (tryb jasny)",
      caption: "Ekran ustawieÅ„ w trybie jasnym z kontrolÄ… wyglÄ…du i lokalizacji."
    },

    {
      src: "/case-studies/internal-operational-spa/4_1.png",
      alt: "Ekran logowania (Keycloak)",
      caption: "ZewnÄ™trzna granica uwierzytelniania obsÅ‚ugiwana przez Keycloak, zapewniajÄ…ca centralne logowanie, wybÃ³r jÄ™zyka i zarzÄ…dzanie sesjÄ… przed wejÅ›ciem do SPA."
    }
  ]}
/>

_Zrzuty UI prezentowane sÄ… z anonimizowanymi danymi i usuniÄ™tym brandingiem._

---

## Model komunikacji z backendem

Frontend integruje siÄ™ z systemami backendowymi poprzez:
- REST over HTTP z payloadami JSON,
- Å›cieÅ¼ki API typu same-origin wystawione przez warstwÄ™ BFF,
- dedykowanÄ… warstwÄ™ BFF zaprojektowanÄ… i zaimplementowanÄ… rÃ³wnolegle z aplikacjÄ… SPA,
- uwierzytelnianie OAuth2 / OpenID Connect (Authorization Code + PKCE).

Kluczowe cechy:
- stan uwierzytelnienia jest zarzÄ…dzany centralnie,
- tokeny sÄ… przechowywane w pamiÄ™ci i doÅ‚Ä…czane przez interceptory HTTP,
- odpowiedzi 401 wyzwalajÄ… kontrolowanÄ… prÃ³bÄ™ ponowienia i fallback do logowania,
- odpowiedzi 403 kierujÄ… do widokÃ³w odmowy dostÄ™pu,
- bÅ‚Ä™dy backendu sÄ… prezentowane jako jawne stany UI.

Komponenty UI pozostajÄ… **odsprzÄ™Å¼one od szczegÃ³Å‚Ã³w API**, korzystajÄ…c ze scentralizowanej warstwy integracji.

Warstwa BFF odpowiada za ksztaÅ‚towanie odpowiedzi systemÃ³w backendowych
do kontraktÃ³w dopasowanych do potrzeb frontendu oraz za wymuszanie spÃ³jnoÅ›ci
pomiÄ™dzy wieloma systemami backendowymi.

---

## ZarzÄ…dzanie stanem i niezawodnoÅ›Ä‡

Aplikacja wykorzystuje:
- lekki stan lokalny w komponentach,
- stan wspÃ³Å‚dzielony przez dedykowane serwisy,
- Angular Signals do synchronicznego stanu UI,
- RxJS do obsÅ‚ugi przepÅ‚ywÃ³w asynchronicznych.

Wzorce niezawodnoÅ›ci obejmujÄ…:
- pojedyncze prÃ³by ponowienia przy bÅ‚Ä™dach uwierzytelnienia,
- jawne zapobieganie pÄ™tlom ponowieÅ„,
- przewidywalne stany Å‚adowania i bÅ‚Ä™dÃ³w.

Frontend **nie zawiera** reguÅ‚ biznesowych ani przepÅ‚ywÃ³w domenowych poza kontrolÄ… dostÄ™pu.

---

## Aktualny stan i ewolucja

Aplikacja jest **aktywnie rozwijana**.

Nie wszystkie planowane funkcje sÄ… jeszcze zaimplementowane, a niektÃ³re obszary sÄ… celowo minimalistyczne.
Jest to Å›wiadomy wybÃ³r:
- funkcjonalnoÅ›Ä‡ dodawana jest przyrostowo,
- granice architektoniczne sÄ… ustanawiane wczeÅ›nie,
- niedokoÅ„czone obszary nie naruszajÄ… stabilnoÅ›ci systemu.

Case study odzwierciedla **rzeczywistÄ… trajektoriÄ™ produkcyjnÄ…**, a nie dopieszczony demoâ€‘snapshot.

---

## Rezultat koÅ„cowy (na ten moment)

Efektem jest **solidna podstawa operacyjnej aplikacji SPA**, ktÃ³ra:
- wspiera wewnÄ™trzne przepÅ‚ywy oparte o role,
- egzekwuje dostÄ™p i bezpieczeÅ„stwo na poziomie UI,
- czytelnie integruje siÄ™ z systemami backendowymi,
- pozostaje zrozumiaÅ‚a i moÅ¼liwa do rozwoju wraz ze wzrostem funkcjonalnoÅ›ci.

Projekt pokazuje, jak aplikacja frontendowa moÅ¼e byÄ‡ zaprojektowana
jako **dÅ‚ugoterminowy system operacyjny**, nawet bÄ™dÄ…c wciÄ…Å¼ w fazie aktywnego rozwoju.

---

## Architecture showcase (GitHub)

To case study koncentruje siÄ™ na **kontekÅ›cie, wyzwaniach i rezultatach**.

Aby zobaczyÄ‡ szczegÃ³Å‚owo:
- architekturÄ™ frontendu,
- przepÅ‚ywy wykonania,
- wzorce integracyjne,
- oraz kompromisy inÅ¼ynieryjne,

zobacz dedykowane repozytorium **architecture showcase**:

ğŸ‘‰ https://github.com/rocketdeploy-dev/showcase-internal-operational-spa