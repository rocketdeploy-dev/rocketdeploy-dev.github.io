---
const { lang } = Astro.props;

const linesPL = [
  "$ rocketdeploy deploy system-core --region eu",
  "✓ build",
  "✓ tests",
  "✓ migrate",
  "✓ rollout",
  "→ monitoring: ok",
];

const linesEN = [
  "$ rocketdeploy deploy system-core --region eu",
  "✓ build",
  "✓ tests",
  "✓ migrate",
  "✓ rollout",
  "→ monitoring: ok",
];

const lines = lang === "pl" ? linesPL : linesEN;
---
<div class="card" style="padding: 14px 14px 12px;">
  <div style="display:flex; gap:8px; align-items:center; margin-bottom: 10px;">
    <span style="width:10px;height:10px;border-radius:999px;background:rgba(255,95,86,.9)"></span>
    <span style="width:10px;height:10px;border-radius:999px;background:rgba(255,189,46,.9)"></span>
    <span style="width:10px;height:10px;border-radius:999px;background:rgba(39,201,63,.9)"></span>
    <span style="margin-left:8px; color: rgba(255,255,255,.5); font-family: var(--mono); font-size: 12px;">deploy.log</span>
  </div>

  <pre id="term" style="margin:0; font-family: var(--mono); font-size: 13px; color: rgba(255,255,255,.78); white-space: pre-wrap;"></pre>

  <script define:vars={{ lines }}>
    const el = document.getElementById("term");

    const reduce = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
    if (reduce) {
      el.textContent = lines.join("\n");
    } else {
      let i = 0;
      let out = "";
      const tick = () => {
        out += (i === 0 ? "" : "\n") + lines[i];
        el.textContent = out;
        i++;
        if (i < lines.length) setTimeout(tick, i === 1 ? 650 : 420);
      };
      setTimeout(tick, 220);
    }
  </script>
</div>
